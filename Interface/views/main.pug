extends layout
block content

  -var nextPage = page==processos.length ? processos.length : parseInt(page,10)+1 
  -var prevPage = page==0 ? 0 : parseInt(page,10)-1 

  header.w3-bar.w3-light-rose.w3-wide.w3-card
    a#header.w3-bar-item
      img(src='/images/themis.ico', alt='Logo', style='max-height: 30px; margin-right: 10px')
      | EW - Sistema de Acordãos
    // Float links to the right. Hide them on small screens
    .w3-right.w3-hide-small(style='margin-right: 15px')
      a.w3-bar-item.w3-button(href='/login') LOGIN
      a.w3-bar-item.w3-button(href='/faq') FAQ
      a.w3-bar-item.w3-button(href="/add") ADD
  body.w3-container
    .w3-container-4.w3-right(style='width:70%') 
      .w3-container
        table.w3-table-all
          tr
            th Processo
            th Data
            th Tribunal
            th Relator
            th Descritores
          each processo in processos
            tr
              td #[a(href="/acordaos/"+processo._id)= processo.Processo]
              td= processo['Data do Acordão']
              td= processo.tribunal
              td= processo.Relator
              td= processo.Descritores
              if admin
                  td
                    button.w3-btn.w3-round.w3-indigo.w3-margin-right  
                        a(href="/retrieveList/" + processo._id) Edit
                    button.w3-btn.w3-round.w3-indigo.w3-margin-right  
                        a(href="#") Delete
        .w3-container#pag(style='max-height: 30px;', class='mt-1').w3-center
          button#pag(onclick=`loadPagina(${prevPage},'${JSON.stringify(queries)}')`).w3-left
            img#pag(src='/images/esquerda.ico', alt='pagEsquerda')
            text(style='margin-left : 5px') Pag Anterior 

          //input#pag(type='text', name='pag', placeholder='página atual: '+ getNumeroPaginaAtual).w3-center
          //button(onclick='loadPagina(\"' + pag + '\")').w3-center Saltar

          button#pag(onclick=`loadPagina(${nextPage},'${JSON.stringify(queries)}')`).w3-right 
            text(style='margin-right : 5px') Pag Seguinte
            img#pag(src='/images/direita.ico', alt='pagDireita')


    .w3-container-4.w3-left(style='width:10%; margin-left:15px')
        form(action='/acordaos', style="margin")
    
          - var campos= ["processo","relator","descritor","tribunal"]
          each campo in campos
            div#form
              input#campo(type='text', name=campo, placeholder=campo, value=queries.campo)
              button#erase(onclick=`limparCampo('descritor', ${queries.descritor})`) 
                img#erase(src='/images/erase.ico', alt='Limpar')
          
          div#form
            - var tribunal = ["Trib. Porto", "Trib. Lisboa", "Trib. Coimbra", "Trib. Leiria"]
            select#tribunal
              option(value='all') All
              each t in tribunal
                option(value=t) #{t}
                
            button#erase(onclick="document.getElementById('tribunal').value = ''")
              img#erase(src='/images/erase.ico', alt='Limpar')
          
          div#form
            input#Submit(type='submit', value='Submit')  
    

  footer.w3-container.w3-light-rose
    h5 &COPY Generated by João Braga, Rafael Ferreira, Marta Sá :: EngWeb2023
