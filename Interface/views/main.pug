extends layout
block content

  -var nextPage = page==processos.length ? processos.length : parseInt(page,10)+1 
  -var prevPage = page==0 ? 0 : parseInt(page,10)-1 
  -var hidePrevButton = page==0 && pageDirection ? 'none' : 'flex' 
  -var hideNextButton = page==processos.length && pageDirection ? 'none' : 'flex' 


  header.w3-bar.w3-teal.w3-wide.w3-card
    a.w3-bar-item
      img(src='/images/themis.ico', alt='Logo', style='max-height: 30px; margin-right: 10px')
      | EW - Sistema de Acordãos
    // Float links to the right. Hide them on small screens
    .w3-right.w3-hide-small(style='margin-right: 15px')
      a.w3-bar-item.w3-button(href='/login') LOGIN
      a.w3-bar-item.w3-button(href='/faq') FAQ
      a.w3-bar-item.w3-button(href="/add") ADD
  body.w3-container
    .w3-container-4.w3-right(style='width:70%') 
      .w3-container
        table.w3-table-all
          tr
            th Processo
            th Data
            th Tribunal
            th Relator
            th Descritores
          each processo in processos
            tr
              td #[a(href="/acordaos/"+processo._id)= processo.Processo]
              td= processo['Data do Acordão']
              td= processo.tribunal
              td= processo.Relator
              td= processo.Descritores
              if admin
                  td
                    button.w3-btn.w3-round.w3-indigo.w3-margin-right  
                        a(href="/retrieveList/" + processo._id) Edit
                    button.w3-btn.w3-round.w3-indigo.w3-margin-right  
                        a(href="#") Delete
        .w3-container(style='max-height: 30px;').w3-center
          button(onclick=`loadPagina(${prevPage},${pageDirection=false},'${JSON.stringify(queries)}')` style=`display: ${hidePrevButton}; justify-content: center; align-items: center;`).w3-left
            img(src='/images/esquerda.ico', alt='pagEsquerda', style='max-height: 20px; max-width: 25px')

          h5.w3-center #{page}
          
          button(onclick=`loadPagina(${nextPage},${pageDirection=true},'${JSON.stringify(queries)}')` style=`display: ${hideNextButton}; justify-content: center; align-items: center;`).w3-right
            img(src='/images/direita.ico', alt='pagDireita', style='max-height: 20px; max-width: 25px')


    .w3-container-4.w3-left(style='width:10%; margin-left:15px')
        form(action='/acordaos', style="margin")
    
          - var campos= ["Processo","Relator","Descritores"]
          each campo in campos
            div#form(style="display: flex; align-items: center;") 
              // adicionei onkeypress=`pegarValor(this)`
              input#campo( type='text', name=campo, placeholder=campo)
              button(onclick=`document.getElementById(${campo}).value = ''`, style="display: flex; justify-content: center; align-items: center;")                 
                img(src='/images/erase.ico', alt='Limpar', style='max-height: 22px;')
              
          
          div#form(style="display: flex;align-items: center;")
            - var tribunal = ["Trib. Porto", "Trib. Lisboa", "Trib. Coimbra", "Trib. Leiria"]
            select#tribunal
              option(value='all') All
              each t in tribunal
                option(value=t) #{t}
                
            button(onclick="document.getElementById('tribunal').value = ''", style="display: flex; justify-content: center; align-items: center;")
              img(src='/images/erase.ico', alt='Limpar', style='max-height: 22px;')
          
          div#form(style="display: flex; align-items: center;")
            input(type='submit', value='Submit')  
    

  footer.w3-container.w3-teal
    h5 &COPY Generated by João Braga, Rafael Ferreira, Marta Sá :: EngWeb2023
