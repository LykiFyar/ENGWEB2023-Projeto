extends layout
block content


  -var nextPage = parseInt(page,10)+1 
  -var prevPage = page==0 ? 0 : parseInt(page,10)-1 
  
  -var hidePrevButton = page==0 ? 'none' : 'flex' 
  -var hideNextButton = nRegistos > 7 ? 'flex' : 'none'


  header.w3-bar.w3-wide.w3-card
    a.w3-bar-item
      img.w3-left(src='/images/themis.ico', alt='Logo', style='max-height: 30px; margin: 10px')
      h5.w3-left(style="margin: 10px") EW - Sistema de Acordãos

    .w3-right.w3-hide-small(style='margin: 10px; margin-right: 15px')
      a.w3-bar-item.w3-button(href='/sugestoes') VER ALTERAÇÕES
      a.w3-bar-item.w3-button(href='/acordaos') HOME
      a.w3-bar-item.w3-button(href='/login') LOGIN
      a.w3-bar-item.w3-button(href="/add") ADD

  body.w3-container(style="padding-top:100px;padding-bottom:20px; ")
    .w3-container-4.w3-right(style='width:100%') 
      .w3-container
        if nRegistos > 0
          table.w3-table.w3-hoverable
            thead
              tr
                th Username
                th Assunto
                th Data de Submissão
            each sugestao in sugestoes
              tr(onclick=`loadSugestao(${sugestao._id})`)
                td= sugestao.Username
                td= sugestao.Assunto
                td= sugestao['Data de Submissão']

          .w3-container(style='max-height: 30px;').w3-center
            button#pag(onclick=`loadPagina(${prevPage},${pageDirection=false},'${JSON.stringify(queries)}')` style=`display: ${hidePrevButton}`).w3-left
              img#pag(src='/images/esquerda.ico', alt='pagEsquerda')

            input#pag.w3-center(value='Página '+page readonly)
            
            button#pag(onclick=`loadPagina(${nextPage},${pageDirection=true},'${JSON.stringify(queries)}')` style=`display: ${hideNextButton}`).w3-right
              img#pag(src='/images/direita.ico', alt='pagDireita')

        else
          h5.w3-center Não foram encontradas sugestões...

  footer.w3-bar.w3-wide.w3-card
    h5 &COPY Generated by João Braga, Rafael Ferreira, Marta Sá :: EngWeb2023
