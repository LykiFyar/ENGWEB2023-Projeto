extends layout 
block content 

    -var dataAcordao = new Date(a['Data do Acordão']);
    - var dataAcordaoISO = dataAcordao.toISOString().split('T')[0];

    .w3-card-4
        header.w3-bar.w3-wide.w3-card
            h1 Editar Acordão
            button#Action.w3-btn.w3-mb-2(type="submit" form="edit") CONFIRMAR
            button#Action.w3-btn.w3-mb-2(type="button" onclick="Javascript:history.go(-2)") CANCELAR
        
        form#edit.w3-container(method="POST" action="/edit/"+a._id, style="padding-top:90px; padding-bottom:20px")
            fieldset 
                label Processo *
                input#form.w3-input.w3-round(type="text" name="Processo" value=a.Processo required) 
                label Data do Acordão *
                input#form.w3-input.w3-round(type="date" name="Data do Acordão" value=dataAcordaoISO required) 
                label Relator *
                input#form.w3-input.w3-round(type="text" name="Relator" value=a.Relator required) 
                label Tribunal *
                input#form.w3-input.w3-round(type="text" name="tribunal" value=a.tribunal required) 
                label Url *
                input#form.w3-input.w3-round(type="text" name="url" value=a.url required) 
                
                label Descritores *
                textarea.w3-input.w3-round(name="Descritores" rows="3" required)
                    each desc in a.Descritores
                        | #{'\n'+desc}

                .w3-container(style="display: flex; flex-direction: row")
                    input.w3-input.w3-round(type="text" placeholder="Novo Descritor" id="novoDescritor" style="width:60%; margin:10px").w3-left
                    button#Action.w3-btn(type="button" onclick="adicionarDescritor()" style="width:30%; margin:10px").w3-right Adicionar             
                    button#Action.w3-btn(type="button" onclick="removerDescritor()" style="width:30%; margin:10px").w3-right Remover
                each value, key in a
                    if value && !['_id','Processo','Data do Acordão','Relator','Descritores','tribunal','url'].includes(key)
                        label #{key}
                        if key.includes('Data')
                            input#form.w3-input.w3-round(type="date" name=key value=value)
                        else if ['Decisão','Sumário','Decisão Texto Integral'].includes(key)
                            textarea.w3-input.w3-round(name=key) #{value}
                        else    
                            input#form.w3-input.w3-round(type="text" name=key value=value)
                
                each c in campos                  
                    if !a.hasOwnProperty(c) && !['_id','Processo','Data do Acordão','Relator','Descritores','tribunal','url'].includes(c)
                        label #{c}
                        if c.includes('Data')
                            input#form.w3-input.w3-round(type="date" name=c)
                        else if ['Decisão','Sumário','Decisão Texto Integral'].includes(c)
                            textarea.w3-input.w3-round(name=c)
                        else
                            input#form.w3-input.w3-round(type="text" name=c)
                
               
        footer.w3-bar.w3-wide.w3-card
            h5 &COPY Generated by João Braga, Rafael Ferreira, Marta Sá :: EngWeb2023
                