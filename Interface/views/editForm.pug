extends layout 
block content 

    .w3-card-4
        header.w3-container.w3-teal
            h2 Editar Acordão
        form.w3-container(method="POST" action="/edit/"+a._id)
            fieldset
                label ID
                input.w3-input.w3-round(type="text" name="_id" value=a._id readonly) 
                label Processo *
                input.w3-input.w3-round(type="text" name="Processo" value=a.Processo required) 
                label Data do Acordão *
                input.w3-input.w3-round(type="date" name="Data do Acordão" value=a['Data do Acordão'] required) 
                label Relator *
                input.w3-input.w3-round(type="text" name="Relator" value=a.Relator required) 
                label Tribunal *
                input.w3-input.w3-round(type="text" name="tribunal" value=a.tribunal required) 
                label Url *
                input.w3-input.w3-round(type="text" name="url" value=a.url required) 
                
                label Descritores *
                textarea.w3-input.w3-round(name="Descritores" rows="3" required)
                    each desc in a.Descritores
                        | #{'\n'+desc}

                .w3-container(style="display: flex; flex-direction: row")
                    input.w3-input.w3-round(type="text" id="novoDescritor" placeholder="Novo Descritor" style="width:60%; margin:10px").w3-left
                    button.w3-btn.w3-teal(type="button" onclick="adicionarDescritor()" style="width:30%; margin:10px").w3-right Adicionar             
                    button.w3-btn.w3-teal(type="button" onclick="removerDescritor()" style="width:30%; margin:10px").w3-right Remover
                each value, key in a
                    if value && !['_id','Processo','Data do Acordão','Relator','Descritores','tribunal','url'].includes(key)
                        label #{key}
                        if key.includes('Data')
                            input.w3-input.w3-round(type="date" name=key value=value)
                        else if ['Decisão','Sumário','Decisão Texto Integral'].includes(key)
                            textarea.w3-input.w3-round(name=key) #{value}
                        else    
                            input.w3-input.w3-round(type="text" name=key value=value)
                
                each c in campos                  
                    if !a.hasOwnProperty(c) && !['_id','Processo','Data do Acordão','Relator','Descritores','tribunal','url'].includes(c)
                        label #{c}
                        if c.includes('Data')
                            input.w3-input.w3-round(type="date" name=c)
                        else if ['Decisão','Sumário','Decisão Texto Integral'].includes(c)
                            textarea.w3-input.w3-round(name=c)
                        else
                            input.w3-input.w3-round(type="text" name=c)
            button.w3-btn.w3-teal.w3-mb-2(type="submit" style="margin:5px") EDIT
            a.w3-button.w3-teal.w3-mb-2(href="/acordaos/"+a._id) CANCEL
               
        footer.w3-container.w3-teal.w3-center
            h5 &COPY Generated by João Braga, Rafael Ferreira, Marta Sá :: EngWeb2023
                